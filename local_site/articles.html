<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Threads & Temperatures — News Hub</title>
<link rel="stylesheet" href="assets/style.css"/>
<link rel="icon" type="image/png" href="assets/img/logo.png">

<!-- Page-only styles for thumbnail layout + external-link arrow -->
<style>

  /* News item with preview image */
  .item.news{
    display:grid;
    grid-template-columns:160px 1fr;
    gap:14px; align-items:center;
    background:#ffffff; /* readable on photo-heavy pages */
    border:1px solid rgba(0,0,0,.06);
  }
  .item.news .thumb{
    width:100%; aspect-ratio:16/9; object-fit:cover;
    border-radius:12px; border:1px solid rgba(0,0,0,.06);
    box-shadow:0 2px 8px rgba(0,0,0,.04);
  }
  @media (max-width:700px){
    .item.news{ grid-template-columns:1fr; }
  }
  /* External link arrow */
  .ext::after{ content:"↗"; margin-left:6px; font-size:.9em; opacity:.7; }
</style>
</head>
<body>

<nav class="nav">
  <div class="nav-inner">
    <div class="brand">
      <img src="assets/img/logo.png" alt="Threads & Temperatures logo" class="logo">
      Threads & Temperatures
    </div>
    <div class="menu"><a href="index.html">Home</a><a href="games.html">Game</a><a href="data.html">Data</a><a href="articles.html" style="background:rgba(76,201,240,.22)">News Hub</a><a href="charities.html">Charities</a></div>
  </div>
</nav>



<main class="container">

  <section class="grid">
    <div class="card col-8">
      <span class="badge">Curated</span>
      <h1>News Hub</h1>
      <p style="margin-top:-4px;color:var(--muted)">
        Reporting on fast fashion, climate impacts, and justice for marginalised communities.
        Thumbnails are local for speed and reliability.
      </p>

      <!-- JSON-rendered list goes here -->
      <div id="newsList" class="list">
        <!-- Fallback while loading -->
        <article class="item news" aria-hidden="true">
          <div class="thumb" style="background:#f1f5f9"></div>
          <div><h3>Loading news…</h3><p>Please wait a moment.</p></div>
        </article>
      </div>
    </div>

    <aside class="card col-4">
      <h2>About this hub</h2>
      <p>We aggregate external reporting to highlight the real-world effects of fast fashion and the climate crisis.</p>
      <div class="list" style="margin-top:10px">
        <div class="item"><div class="icon">✅</div><div><strong>Credible sources</strong><br/>International orgs & established outlets.</div></div>
        <div class="item"><div class="icon">⚖️</div><div><strong>Justice lens</strong><br/>Focus on workers, communities, ecosystems.</div></div>
      </div>
      <p style="margin-top:12px">
        Suggest a link: <a href="mailto:editor@threads-temperatures.org">editor@threads-temperatures.org</a>
      </p>
    </aside>
  </section>

</main>

<footer class="container">© <span id="year"></span> • Made locally</footer>

<!-- Render from assets/news.json -->
<script>
(async function(){
  const root = document.getElementById('newsList');

  function itemTemplate(n){
    const safeTitle = (n.title || '').replace(/</g,'&lt;').replace(/>/g,'&gt;');
    const safeDesc  = (n.desc  || '').replace(/</g,'&lt;').replace(/>/g,'&gt;');
    const img = n.img || '';
    const url = n.url || '#';

    return `
      <article class="item news">
        <img class="thumb" src="${img}" alt="${safeTitle}" loading="lazy" width="320" height="180">
        <div>
          <h3><a class="ext" href="${url}" target="_blank" rel="noopener noreferrer">${safeTitle}</a></h3>
          <p>${safeDesc}</p>
        </div>
      </article>
    `;
  }

  try{
    const res = await fetch('assets/news.json', { cache: 'no-store' });
    if(!res.ok) throw new Error('Failed to load news.json');
    const items = await res.json();

    if(Array.isArray(items) && items.length){
      root.innerHTML = items.map(itemTemplate).join('');
    }else{
      root.innerHTML = `
        <article class="item">
          <div class="icon">ℹ️</div>
          <div>
            <strong>No news items yet.</strong>
            <p>Add entries to <code>assets/news.json</code> to populate this list.</p>
          </div>
        </article>
      `;
    }
  }catch(err){
    console.error(err);
    root.innerHTML = `
      <article class="item">
        <div class="icon">⚠️</div>
        <div>
          <strong>Couldn’t load news.</strong>
          <p>Make sure <code>assets/news.json</code> exists and is valid JSON.</p>
        </div>
      </article>
    `;
  }
})();
</script>

<script src="assets/script.js"></script>
</body>
</html>
